{"remainingRequest":"/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/node_modules/babel-loader/lib/index.js!/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/src/components/Bookings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/src/components/Bookings.vue","mtime":1569164900000},{"path":"/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/Users/jimmybui/Documents/Web&App/example/my_vue_grid/frontend/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapGetters, mapActions } from 'vuex';\nimport { AgGridVue } from \"ag-grid-vue\";\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\nimport \"ag-grid-community/dist/styles/ag-theme-blue.css\";\nimport { URL } from \"../constants/constants\";\nimport Popup from \"./Popup\";\nimport Error from \"./Error\";\nimport axios from 'axios';\nimport moment from 'moment';\nexport default {\n  name: 'Bookings',\n  props: ['seller'],\n  components: {\n    AgGridVue: AgGridVue,\n    Popup: Popup,\n    Error: Error\n  },\n  data: function data() {\n    return {\n      columnDefs: [{\n        headerName: 'ID',\n        field: 'id',\n        cellClass: \"grid-id\",\n        width: 84,\n        cellRenderer: function cellRenderer(data) {\n          return data.value.substring(0, 5).toUpperCase();\n        }\n      }, {\n        headerName: 'Product Name',\n        field: 'productName',\n        width: 300\n      }, {\n        headerName: 'Quantity',\n        field: 'quantity',\n        cellClass: \"grid-number\",\n        width: 100,\n        cellRenderer: function cellRenderer(data) {\n          return new Intl.NumberFormat().format(data.value);\n        }\n      }, {\n        headerName: 'Rate',\n        field: 'rate',\n        cellClass: \"grid-number\",\n        width: 84,\n        cellRenderer: function cellRenderer(data) {\n          return '$ ' + new Intl.NumberFormat('en-US', {\n            minimumFractionDigits: 2\n          }).format(data.value / 100);\n        }\n      }, {\n        headerName: 'Cost',\n        field: 'cost',\n        cellClass: \"grid-number\",\n        width: 100,\n        cellRenderer: function cellRenderer(data) {\n          return '$ ' + new Intl.NumberFormat().format(Math.round(data.value));\n        }\n      }],\n      rowData: null,\n      rowSelection: null,\n      overlayNoRowsTemplate: null,\n      error: null,\n      detail: null\n    };\n  },\n  beforeMount: function beforeMount() {\n    var _this = this;\n\n    axios.get(URL + \"/bookings\").then(function (resp) {\n      var products = _this.$props.seller.products;\n      var bookings = [];\n      products.map(function (product) {\n        var data = resp.data.filter(function (x) {\n          return x.productId == product.id;\n        });\n        data.map(function (item) {\n          // Check end date is after today\n          if (moment(item.endDate).isAfter()) {\n            var booking = _objectSpread({}, item, {}, {\n              productName: product.name,\n              rate: product.rate\n            });\n\n            booking.cost = product.rate / 1000 * booking.quantity;\n            bookings.push(booking);\n          }\n        });\n      }); // Sort by start date\n\n      bookings.sort(function (a, b) {\n        return a.startDate.localeCompare(b.startDate);\n      });\n      _this.rowData = bookings;\n    }).catch(function (err) {\n      // Handle the error\n      _this.error = err; // Hide loading\n\n      _this.$refs.loading.handleLoading();\n    });\n    this.rowSelection = \"single\";\n    this.overlayNoRowsTemplate = \"No Active Bookings\";\n  },\n  methods: {\n    onGridReady: function onGridReady(params) {\n      var _this2 = this;\n\n      this.gridApi = params.api;\n      this.gridColumnApi = params.columnApi;\n      this.gridApi.sizeColumnsToFit();\n      this.gridColumnApi.autoSizeColumns();\n      window.addEventListener(\"resize\", function () {\n        setTimeout(function () {\n          _this2.gridApi.sizeColumnsToFit();\n\n          _this2.gridColumnApi.autoSizeColumns();\n        });\n      });\n    },\n    handlePopup: function handlePopup(row) {\n      this.detail = row && row.data ? row.data : null;\n      this.$refs.popup.handlePopup();\n    }\n  }\n};",{"version":3,"sources":["Bookings.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <transation>\n        <ag-grid-vue class=\"grid ag-theme-blue\"\n                    @grid-ready = \"onGridReady\"\n                    :columnDefs = \"columnDefs\"\n                    :rowData = \"rowData\"\n                    :enableSorting = \"true\"\n                    :enableFilter = \"true\"\n                    :paginationAutoPageSize = \"true\"\n                    :pagination = \"true\"\n                    :rowSelection = \"rowSelection\"\n                    :enableColResize = \"true\"\n                    :overlayNoRowsTemplate = \"overlayNoRowsTemplate\"\n                    @row-double-clicked = \"handlePopup\"\n                 >\n        </ag-grid-vue>\n        <Popup ref=\"popup\" message=\"Show the detail of booking\" :detail=\"detail\" />\n        <Error v-if=\"error && error.message\" :message=\"error.message\" />\n    </transation>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapActions } from 'vuex'\nimport { AgGridVue } from \"ag-grid-vue\"\nimport \"ag-grid-community/dist/styles/ag-grid.css\"\nimport \"ag-grid-community/dist/styles/ag-theme-blue.css\"\nimport { URL } from '../constants/constants'\nimport Popup from './Popup'\nimport Error from './Error'\nimport axios from 'axios'\nimport moment from 'moment'\n\nexport default {\n    name: 'Bookings',\n    props: ['seller'],\n    components: {\n        AgGridVue,\n        Popup,\n        Error\n    },\n    data() {\n        return {\n            columnDefs: [\n                {   headerName: 'ID', field: 'id', cellClass: \"grid-id\", width: 84, cellRenderer: (data) => {\n                        return data.value.substring(0, 5).toUpperCase();  \n                }},\n                {   headerName: 'Product Name', field: 'productName', width: 300 },\n                {   headerName: 'Quantity', field: 'quantity', cellClass: \"grid-number\", width: 100, cellRenderer: (data) => {\n                        return new Intl.NumberFormat().format(data.value);\n                }},\n                {   headerName: 'Rate', field: 'rate', cellClass: \"grid-number\", width: 84, cellRenderer: (data) => {\n                        return '$ ' + new Intl.NumberFormat('en-US', { minimumFractionDigits: 2 }).format(data.value / 100);\n                }},\n                {   headerName: 'Cost', field: 'cost', cellClass: \"grid-number\", width: 100, cellRenderer: (data) => {\n                        return '$ '+ new Intl.NumberFormat().format(Math.round(data.value));\n                }}\n            ],\n            rowData: null,\n            rowSelection: null,\n            overlayNoRowsTemplate: null,\n            error: null,\n            detail: null\n        }\n    },\n    beforeMount() {\n        axios.get(URL + \"/bookings\")\n        .then(resp => {\n            const products = this.$props.seller.products;\n            const bookings = [];\n            products.map(product => {\n                const data = resp.data.filter(x => x.productId == product.id);\n                data.map(item => {\n                    // Check end date is after today\n                    if(moment(item.endDate).isAfter()) {\n                        const booking = {...item, ...{ productName: product.name, rate: product.rate }};\n                        booking.cost = (product.rate / 1000) * booking.quantity;\n                        bookings.push(booking);\n                    }\n                });\n            })\n            // Sort by start date\n            bookings.sort((a, b) => a.startDate.localeCompare(b.startDate));\n            this.rowData = bookings;\n        })\n        .catch((err) => {\n            // Handle the error\n            this.error = err;\n            // Hide loading\n            this.$refs.loading.handleLoading();\n        });\n\n        this.rowSelection = \"single\";\n        this.overlayNoRowsTemplate = \"No Active Bookings\";\n    },\n    methods: {\n        onGridReady(params) {\n            this.gridApi = params.api;\n            this.gridColumnApi = params.columnApi;\n\n            this.gridApi.sizeColumnsToFit();\n            this.gridColumnApi.autoSizeColumns();\n            \n            window.addEventListener(\"resize\", () => {\n                setTimeout(() => {\n                    this.gridApi.sizeColumnsToFit();\n                    this.gridColumnApi.autoSizeColumns();\n                });\n            });\n        },\n\n        handlePopup(row) {\n            this.detail = row && row.data ? row.data : null;\n            this.$refs.popup.handlePopup();\n        }\n    }\n}\n</script>"],"sourceRoot":"src/components"}]}